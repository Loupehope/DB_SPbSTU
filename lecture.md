# Первая лекция
Физическое хранилище данных - файлы.  
Логическое хранилище - табличное пространство - группа файлов
На сервере - БД и инстансы.  
База данных: файлы данных.  
файлы управления - о завершениях транзакций, о расположении файлов данных и повторов, без них не работает бд   
файлы оперативных журналов повторов - информация о командах, которые были проведены для восстановления бд.  
Archived log files - копия файлов из online redo log files.  
Экземпляр - области оперативки, где временно хранится информация и набор фоновых процессов - взаимодействие между оперативкой и бд.  
БД + экземпляр = сервер оракл.  
SGA - system global area -  общая выделяемая оперативная память.  
PGA - program global area - связана с конкретным фоновым или серверным процессом - персональный кусочек памяти    
Database buffer cache - изменяемые данные, пока транзакция не закончилась    
Redo log buffer - временное хранилище информации о командах. (DML, DDL, commit)  
Shared pool - коды программ (код пакетов, функции на PLSQL) и планы выполнения запросов.   
Словарь данных - набор системных представлений (select).   
Данные из Redo log buffer будут перенесены, если:
- сделан коммит
- заполнен на 1/3
- больше 1 мб памяти заполнено
- в случае аварийного завершения
- Перед тем как DBW начнут запись данных на диск.  
## Процессы
- DBWn (несколько процессов параллельно) - записывает данные из DBC в DF. (Медленно) - при завершении транзакции или если места не осталось. Запись в журналы команд быстрая, поэтому при восстановлении базы команды выполнятся повторно. Количество сбрасываемых файлов можно прописать в файлах инициализации.
- Контрольные точки о транзакиях хранятся в заголовках и в файлах управления. Если данные при транзакции не сохранились, то благодаря табличному пространству undo бд всё вернет на свои места
- LGWR (1 процесс)
- CKPT - процесс контрольной точки - момент, когда данные из DBC перенеслись в DF - фиксация в заголовках файлов данных и контрольных файлах в виде отдельной строки
- SMON - системный монитор - начинает работу при запуске экземпляра. Считывает файлы параметров инициализации, на основе которых создает SGA, Буферы и кэши нужных размеров и запускает процесс восстановления. SMON - запускает остальные фоновые процессы + часть задач по регистрации пользователей
- PMON - process monitor - остановка всех фоновых процессов, отчистка буферов и откат не завершенных транзакций - при завершении экземпляра. Также помогает провести восстановление, когда упал пользовательский процесс: отчистка буферов и ресурсов. Мониторинг сессии и динамически регистрирует сервисы базы данных со слушателями
- Alert_log - сообщения об ошибках
- RECO - вспомогательный процесс - нужен если распределенная база данных (на нескольких серверах) для координации управления транзакциями
- При подключении к серверу на клиенте (пользователя) создается пользовательский процесс. Запрос о подключении передается службе Listener - передаем имя, пароль, нужная бд - эти данные передаются субд - на которой осуществляется проверка данных. Если ок, то создается серверный процесс - по умолчанию каждое подключение свой серверный процесс - dedicated mode. Выделяется PGA - тут хранятся приватные данные пользователя. Передается ответ листенеру, что всё ок - после создается соединение напрямую между пользователем и серверным процессом.
- Если пользователей много, то оракл заранее выделяет определенное кол-во серверных процессов. Если нет свободных серверных процессов, то пользователь становится в очередь, которыми управляют диспетчеры - shared mode. Теперь приватная информация не хранится полностью в PGA - часть передается в SGA.
- Из DF в DBC данные передает серверный процесс - т.е. читает файлы данных серверный процесс.  
Подключение к бд - взаимодействие пользовательского процесса и серверного.  
Сессия - взаимодействие между пользователем и экземпляром.   
## Также в экземпляре хранятся:
- Коды джава и виртуальных машин
- Информация по очередям, хранение информации по репликации (копирование базы данных на другую базу)
- Large pool - буффер ввода/вывода, очередей запросов, очереди ответов и тд. - используется при восстановлении и копировании

# Вторая лекция

## Работа redo log buffer   
- Есть группы, состоящие из файлов оперативных журналов повторов - member - элементы группы. Файлы полные копии друг друга. Бд не заметит их пропажу, если их будет > 0 (будет писать ошибки в alert_log). Иначе оракл не работает.   
- Если группа заполнена, то переходим к следующей группе (switch). 
- Если все группы заполнены, то возвращаемся к первой группе. No archive log - такой режим работы называется, так как существуют на ограниченном этапе времени. Количество о максимуме групп и элементов хранится в control file - двоичный файл.  
- Archive log - при каждом переключении с группы на группу создается копия одного из файлов (1 к 1) в отдельной структуре. Максимальное кол-во файлов в control file. Это делает процесс ARCn (несколько процессов параллельно). 
- Stand by destination - полная копия базы данных и после завершения транзакций информация передается в standby бд и там же тоже выполняется. Вторая бд поддерживается в том же состоянии, если что-то пошло не так, то можно переключить на stand by базу.
MMON - memory monitor - процесс отслеживает состоянии SGA и передает это на enterprise mamanger   
MMAN - memory manager - решение задач автоматизации распределения памяти.  
## Состояния DBC:
- Pinned - блок в работе - данные меняются
- Clean - когда-то в буффере что-то было, но сейчас он чистый
- Dirty - работа по изменениям закончена (commit) - но перенос в файлы данных не завершен
- Free or unused - блок никогда не использовался (не анализируется состояние буффера при записи)
## Вспомогательный файлы:
- Файлы параметров:
	- initora - текстовый файл, для применения изменений нужна перезагрузка экземпляра - изменение через текстовый файл.
	- spfile - при изменении параметров перезапуск не требуется - изменение при помощи команды alter system.
- Файлы резервных файлов
- Файл паролей - зашифрован и двоичный привилигированных учетных записей - sysdba - делает всё, sysoper - не может менять структуру бд, но может остановить и запустить бд. (Grant - выдача привилегий). Для изменения файлов паролей используется утилита oraclvp.exe
- Файл ошибок 
Размер блока в табличном пространстве system изменить нельзя.  
Набор табличных пространств образует базу данных.    
Схема - набор объектов, которые принадлежат одному пользователю.
Один файл принадлежит одному табличному пространству.   
Есть предопределенные табличные пространства. При создании БД создаются обязательно табличное пространство USERS, SYSTEM - req - таблицы словаря данных, SYSAUX - req - объекты enterprise manager, TEMP, UNDO, если установить параметр SAMPLES SCHEMA - то устанавливается табличное пространство EXAMPLES. 

# Третья лекция

V$ бурет информацию из таблиц, оперативной памяти и файлов управления.   
Два файла с параметрами инициализации - initora, spfile.
Изменения в spfile осуществляется с помощью alter system.

<p align="left">
<img src="assets/1.png">
<img src="assets/2.png">
<img src="assets/3.png">
</p> 

В initora размер данных указываем в байтах, в spfile можем уточнить.  
Статические параметры меняются при перезапуске экземпляра бд, динамические при работе бд на уровне сессии или системы.  
В alter system ... scope=(Memmory, Both, Spfile). 

## Этапы startup
Чтобы данные для инициализации брались не из spfile, необходимо изменить путь в системном реестре или в командной строке прописать либо в менеджере в advanced options.
Nomount -> Mount -> Open.   
Nomount - считывание данный инициализации, открытие sga, создание экзмепляра. - **Startup** - в режиме open или **Startup nomount** или **Startup pfile='...'**.   
Mount - считывает инфу о расположении файлов управления и открывает их. Не можем пока получить инфу из таблиц. - **alter database mount**.    
Open - считывает инфу о расположении redolog и data files. - **Startup mount**.    

## Этапы shutdown

<p align="left">
<img src="assets/4.png">
</p> 

# Четвертая лекция

tnsping - доступна ли бд
Oracle net - на клиенте и на сервере + конфиг файлы (tnsnames.ora - параметры подключения клиента к серверу - на клиенте, listener.ora и sqlnet.ora (можно разрешить пользователю-администратору как sysdba) - на сервере)
lsnrctl <name> - команда для листенера, по умолчанию первый созданный
ПОСМОТРЕТЬ ЧТО КОНФИГУРИРУЕТ NET SERVICES
Полномочия хоста для создания - администратор
Static Database Registration - определение параметров бд с которой будет работать listener
Название бд - Global name, Oracle Home directory - путь к папке, где находится программное обеспечение, SID - имя экземпляра.
Naming Methods - получение инфы для подключения
	1. Easy connect naming - инфа о бд к которой подключаемся нигде не хранится, задается в строке (всё пишем в строке connect) - TCP/IP (нет балансировки, двойных listeners)
	2. Local naming - инфа о бд в конфиг файле - tnsnames.ora (на клиенте и сервере) - берет инфузорным Oracle net
	3. Directory naming - хранение инфы в спец бд для больших систем
	4. External naming - использование стороннего ПО

## Easy connect
	1. Включено сразу - 11g
	2. Не требует конфиг файлов
	3. TCP/IP
	4. Есть ограничения функций
`SQL> CONNECT hr/hr@db.us.oracle.com:1521/dba11g`
db.us.oracle.com - сетевое имя бд
dba11g - имя бд
## Local naming
	1. Описано выше и отлично от Easy connect
## Directory naming
	1. Oracle Internet Directory
	2. Аналогично остальное Local naming
# Конфигурирование сетевых имен
В tnsnames.ora можно всё отредактировать.  
Можно сделать несколько псевдонимов.  
Дом параметры для работы с несколькими listeners:
	1. Если одни отказал, то переходить на другой
	2. Балансировка 
	3. Маршрутизация подключения.   
Dispatchers - используется для распределения пользователей в Shared Mode.   
Когда не надо использовать Shared Server:
	1. Админ бд
	2. Режим востановления или копирования
	3. Загрузка больших массивов данных
	4. Загрузка инфы из одной бд в другую (warehouse)

# 5 лекция
Физически инфа хранится в блоках OS -> файлах OS, логически в блоках оракл -> экстент - в одном сегменте -> сегмент - элемент табл. пр-ва для хранения одного объекта -> табличное пространство -> база данных.     
Размер блока для табличного пространства system изменить нельзя, а для других можно.    
Блок состоит из заголовка (номер блока, Нифа о транзакциях, которые работает с этим блоком, о максимуме рабочих транзакций), свободное пространство:
	1. Pctfree - будет записывать инфу в блок, пока свободного места не будет больше, чем n%. 
	2. pctused - запись в блок производится не будет пока не достигнет минимальной наполненности.   
Табличные пространства могут принадлежать только одной базе, состоят из одного или более файла и делятся на логические единицы.     
Файлы принадлежат только одной базе и табличному пространств, репозиторий для объектов схем.
Управление табличными пространствами:
1. Locally - по умолчанию
	1. Свободные экстент управляются табличным пространством.
	2. Создаётся bitmap
2. Dictionary-managed - при создании бд
	1. Инфа о свободных экстентах хранится в словаре данных - в табличном пространстве system, управляется Oracle.
	2. Поддерживается для обратной совместимости 
В свойствах пользователя хранится информация о табличном пространстве по умолчанию. Если не указать табличное пространство по умолчанию нигде, то попадет таблица в system.    
При изменении табличного пространства можно сделать по умолчанию, статус и добавлять/изменять фалы данных.    
OMF - оракл сам создаст нужные файлы.    
Чтобы увеличить увеличить бд:
	1. Создать табличное пространство
	2. Добавить файлы в табличное пространство
	3. Увеличить размер файла данных
	4. Autoextend data files
ASM - можно хранить только файлы оракл - балансировка нагрузки объема данных между дисками, копии данных 
КОНЦЕПЦИИ

# 6 лекция
Три вида аутентификации:
	1. По паролю
	2. Внешняя
	3. Глобальная.  
У администратора должна быть привилегия создавать и удалять файлы бд, а у пользователя нет.   
Типы привилегий:
	1. Системные - выполнение действий в бд без привязки к объекту (Admin Option). При отзыве привилегии у родителя, привилегия сохраняется у потомка. 
	2. Объектные - (Grant Option). При отзыве привилегии у родителя, привилегия сохраняется у всех потомков.   
Есть набор предопределенных ролей:
	1. Connect - создание сессии
	2. Resource - create table, trigger, type, cluster
	3. Sheduler_admin - create any job, program 
	4. DBA
	5. Select_catalog_role - нет системных, только объектные на словарь данных + V$.      

SET ROLE - включить роль не по умолчанию.   
Роли могут быть с паролем.   
Профиль определяет ресурсы доступные пользователю (RESOURCE_LIMIT = true), статус и пароль.   
Есть профиль default.   
Сколько я должен менять пароль, чтобы вернуться к старому паролю, когда должен поменять пароль, сложность паролей, срок действия, блокировка при неудачных попытках.    
Функция для проверки сложности пароля - на Pl/sql в схеме sys(verify_function_11g) (в папке).   
Сколько места пользователь может использовать в табличном пространстве (unlimited_tablespace).   
ОГРАНИЧЕНИЯ.   
	1. Deferred - проверка после коммита.   
	2. Nondeferred.   
	3. Validate.   
	4. Nonvalidate - не трогаем старые строки.   
По умолчанию enable validate.   
Временные таблицы, автоматически отчищаются по окончанию сессии (ON COMMIT PRESERVE ROWS) или транзакции, а таблицы живут вечно (drop), сюда могут писать другие пользователи, но видим только свое.   

# 7 лекция

Undo retention - время хранения данных в табличном пространстве undo
DML (insert, update, delete, merge) в транзакции - можем rollback / commit
Undo data - копия данных до начала модификации для каждой транзакции. По меньшей мере хранится до конца транзакции.  
Служат для согласованности чтения
Используется для запросов flashback query, flashback transaction - инфа о том, как данные менялись на протяжении транзакции и flashback table - просмотр инфо в какой-то момент в прошлом целиком в таблице.
Undo segment - круговая организация сегментов
Транзакция работает только с одни сегментом (только RAC иначе)
Один undo несколько транзакций
Не можем записывать ничего кроме undo информации
Ассоциировано только с одним табличным пространством (1 - 1) одновременно

Undo:
- Информация как отменить изменения
- Для rollback, поддержания согласованности по чтению и для быстрого восстановления (flashback)  
- В undo segment

Redo:
- Информация как воспроизвести изменения
- Накатывая изменений базы данных
- В redo log files
- От потери информации (чтобы воспроизвести изменения при аварийном завершении)

Автоматическое управление undo:
- Полная автоматизация 
- Для всех сессий
- Доступно расширение AUTOEXTEND для долгих операций
- Само подстраивается при фиксированном значении размера

Поддержка операции flashback:
- Определить время хранения данных в undo
- Перевести к фиксированному размеру, если надо
- Следить, чтобы не было ошибки snap shot too old - выполнили транзакцию, инфа сохранилась в undo, транзакция завершилась - commit, но пользователь начал запрос до начала транзакции очень длинный. Теперь в undo надо хранить инфу. 

UNDO_RETENTION - в секундах, уже законченная инфа в undo должна сохраняться:
- AUTOEXTEND
- Для LOB файлов
- Гарантированной удержание информации

Графики:
1. Зеленое - место в табличном пространстве undo свободное
2. Желтое занятое для длинных запросов
3. Красное - занято активными транзакциями

1. Время выполнения запросов / максимально возможное

1. Скорость генерации данных в undo (кб/с)

# 8 лекция

Audit - контроль действий пользователя
Принцип наименьших привилегий - чем меньше у пользователя привилегий, тем лучше:
1. Защита информации в словаре данных - o7_DICTIONARY_ACCESSIBILITY=FALSE - распространение select, ... на таблицы словаря данных до 7 Oracle, не надо указывать sysdba
2. Убирать public - общая привилегия
3. Ограничить директории, доступные пользователю
4. Не выдавать административные привилегии
5. REMOTE_OS_AUTHENT=FALSE

Защита аккаунтов:
- Файл паролей
- Шифрование данных

Чтобы проводить аудит необходимо изменить параметр в spfile - audit_trail - OS, DB (extended - дополнительная информация в аудит: timestamp, proxy_sessionid, global_uid, instance number, os_process, transaction_id, sql_text).
DBA_COMMON_AUDIT_TRAIL.
Серверный процесс генерирует информацию аудита - записываются в таблицу бд, файл операционной системы или xml.


AUDIT table;
AUDIT select any table, create any trigger; - any - системная привилегия - не сфокусированный аудит.
AUDIT select any table BY hr BY SESSION; - системная привилегия - сфокусированный.
AUDIT ALL on hr.employees; -  объектный не сфокусированный
AUDIT UPDATE.DELETE on hr.employees by access; - объектный сфокусированный
Сфокусированный - запись на каждую операцию, несфокусированный - запись на сессию (частота записи)
NOAUDIT - отключение
VALUE-BASED AUDITING
Аудит на основе триггеров - при выполнении триггер генерирует строки в аудит, нельзя сделать на truncate, select
Fine-Grained - dbms_fga - select, insert, update, delete, merge, прилинкован к колонке(набор) или представление и можем активировать запуск процедуры.
FGA Guidelines:
- Null если хотим аудитировать все строки и столбцы
- Имя политики - уникально
- Таблицы или представления должны существовать
- Ошибка при условии

DBA Auditing
Sysdba / Sysoper
Сохраняется в файлах 
Подключения аудитируются всегда
Audit_sys_operations - контроль информации о sys
Audit_file_dest

 Automated tasks - сжатие сегментов в тб ,работа adviser по индексам и материализованном представлении
  Advisory framework 
  Server alerts
  Automatik workland repository - инфраструктура для анализа, сбора и рекомендаций данных - xранилище в sysaux
  Baseline - набор снимков состояния бд в AWR пока админ считает, что база работает нормально
  Metric - скорость накопленных статистик - (например, время ожидания для выполнения ввода вывода)
  Statistics - набор коллекции данных для мо
  Threshold - граничное значения для сравнения метрики
  Automatic Diagnostic Repository - содержит инфу о крит ошибках
  
  Cost-based optimizator - основанный на стоимости - по дефолту
  Rule-based optimizator - на правилах
  
  Optimizer statistics
  - Снепшот точки во времени
  - Пока экземпляр работает, статистика считается
  - Сбор идет автоматически
	- Сбор статистики, восстановление, блокировка, удалить, разблокировать
	
	Уровни - statistic level:
	- Basic - не обеспечивает возможностей по самонастройке
	- Typical - по дефолту, сам настраивается
	- All - много статистики для ручной диагностики

	DBMS_STATS - 
	set - установить значение параметра
  get - получить значение параметра
  delete - удалить параметр
  export - экспортировать статистику
  import - импортировать статистику
	
	AWR
	- встроенный репозиторий 
	- хранятся снепшоты бд метрик каждые 60 минут на протяжении 8 дней
	- для самонастройки
	- с помощью NMON записывается

	текущая статискика в sga - v$ - получаем инфузорным из оперативки, dba_ - получение статистики из репозитория - таблиц. 
  
  ADDM - самостоятельно настраиваются
  
  Создать baseline - промежуток снепшотов, когда всё было хорошо. DBMS_WORKLAND_REPOSITORY.CREATE_BASELINE. Single, Repeated - расписание бейзлайнов. 
  ADDM - самостоятельно настраиваются
  
  Создать baseline - промежуток снепшотов, когда всё было хорошо. DBMS_WORKLAND_REPOSITORY.CREATE_BASELINE. Single, Repeated - расписание бейзлайнов.
  
  Уровень сбора статистики:
  - Basic - отключает большую часть функциональности ADDM
  - Typical - рекомендованный
  - All - добавляет sql tanning информацию к снепшотам

ADDM - automatic database diagnostic monitor
- Запускается полбе каждого снепшота AWR
- Анализирует экземпляр и находит узкие места
- Результаты хранятся в AWR

Топ SQL, которые вносят время в DB Time - затраты времени внутри бд
Buffer busy - серверный процесс хочет перенести данные из файлов данных в буффер данных, но там занято

Advisory framework
ADDM:
- SQL tanning advisor - помогает оптимизировать планы выполнения запросов
- SQL access advisor - рекомендует использовать индексы и рекомендации по материализованным представлениям
- Memory advisor - регулировка оперативной памяти (SGA (buffer cache, shared pool, java pool, streams pool) / PGA)
- Space - управление место на диске | segmetn (сжатие и тд) и undo adviser (размер undo)
- Backup - Min time to recover - если экземпляр упал, то мы говорим, чтобы он восстановился в течение времени какого-то (среднее время на восстановление)

Chekers - проверка например блоков данных

Automatic Maintenance Tasks - задачи автоматического обслуживания

Server generated errors - что-то не так с экземпляром, инфа передается в AWR и в EM
DBA_outstanding_alerts - пришедшие ошибки 
//MMON
DBA_alert_history - поправленные ошибки

AMM - общий объем выделенный экземпляру (+ PGA SGA) - memory_tagret
ASMM - опредялется общий размер SGA - sga_target (shared, java, buffer, streams но не буффер REDO LOG BUFFER)

# 9 лекция

Категории ошибок:
- На уровне выполнения команды
Ввод неверных данных в таблицу, недостаточные привелегии, выделение квоты пользователю, добавление места в табличное пространство, логические ошибки в приложениях

- Ошибки пользовательского процесса - действия дба не требуются (PMON - откатывает изменения)
Нестандартный дисконнект, прерывание сессии, ошибка прерывающая сессию

- Сетевые
Упал listener, установка failover, сетевой карты, проблема с сетевыми подключениями

- Пользователя 
Случайно удалил данные, удалил таблицу
LogMiner - проследит операции пользователя для возвращения в исходное состояние. (Содержит противоположные команды)

*Flashback*:
- Просмотр состояний данных в прошлом
- Возвращения к данным в прошлом
- Помогать для анализа ошибок (не восстанавливаем таблицу - query, versions query, transaction query - какие операции выполнялись в рамках транзакции) и восстановления (transaction backout, table, drop, database - вернуть бд к состоянию в прошлом - log во fra)

- Сбой в работе экземпляра
Пропало напряжение, с hardware, фоновые процессы, экстренное завершение - рестарт экземпляра (startup - SMON - попытается остановиться самостоятельно - Instance Recovery - откат изменений из redo log, которые не закомичены, если закомичены, то будут данные записаны)

CKPT - обновляет заголовки файлов данных, в файлы управления, сигнализирует DBWn о полных чекпоинтах - (полная запись на диск), если не хавает памяти - не полный чекпоинтов.

LogWriter:
- При коммите
- Заполнен на треть
- Каждые три секунды
- Перед записью DBWn
- Больше 1 мегабайта - наработает автоматическое расширение

MTTR - 0 - отключен, 3600 секунд - максимум (FAST_START_MTTR_TARGET - в файле инициализации)

- Ошибка в медиа фалов (потеря файлов)
Ошибка в драйвере диска, файла данных, контроллера диска

FGA:
- Администрируется ораклом
- DB_RECOVERY_FILE_DEST (место на диске)
- DB_RECOVERY_FILE_DEST_SIZE - сообщение об ошибке, если превысили занятый объем
- Автоматически обслуживается согласно политики удержания - хранить копии определенное время и количество бэкапов

Status Redo log:
Active - запись в нее не идет, на данные нужны для восстановления тразации или не записались в archive log
Inactive
Current

Archiver - сохраняет записи об изменениях из redo log files (archive log list)
Можно определить до 10 мест архива лог файлов

# 10 лекция

Бекапы можем делать с помощью:
- Recovery manager - утилита командной строки (RMAN)
- Oracle secure backup - с шифрованием и упрощение бэкапов на ленточных устройствах
- user-managed backup - ручной процесс обслуживания бэкапов, используются свои скрипты и используются команды ОС

В FRA:
Image copies - копии один к одному файлов данных
Backup pieces (бинарники) - копии измененных данных (модификации файлов данных)

Стратегии резервного копирования:
- Полная копия (whole) - все объекты бд
- Частичное копирование

Тип резервного копирования:
- Все блоки бд попадают в резервную копию (full)
- Инкрементальная - блоки, которые изменились с момента последнего бекапа:
	- Cumulative - в бекап попадают в блоки, которые изменились от уровня ноль (полный)
	- Differential - те блоки, которые изменились с последнего резервного копирования

Режимы бэкапов:
- Offline - выключить бд и перевести в состояние mount - согласованная - холодная - можно восстановить на момент, когда копия была создана
- Online - бд в состоянии open - несогласованная - горячая 

*Физичкой резервное копирование* - создание файлов бд
*Логическое* - сохранение команд, по которым можно восстановить бд - файл экспорта

RMAN - копия файлов данных, управления, журналов повтора и параметров сервера на диск или ленточное устройство. 

Compression backup set - удаление пустых блоков 
Enable block changing - собрание информации об измененных блоках с момента последнего резервного копирования (для инкрементального копирования)

Политика удержания:\
- Хранить бэкапы определенное время
- Минимальное количество бекапов

Расписание резервного копирования

Backup to trace - собрание команды в trace file для создания копии текущего control file. (Backup control file to trace)

Enable flashback database - создаем лог по всем действиям для восстановления всей бд к определенному моменту времени (в FRA) - не надо делать резервное копирование

Открытая бд может упасть, если:
- Потерялся control file
- Потерялся файл данных system или undo
- Пустая redo log группа

Data recovery advisor не поддерживает RAC, не работает со standby

Block recovery - отдельное восстановление блоков в фале данных

Low, Medium, High, Critical

V$IR_Failure - все ошибки и закрытые тоже
V$IR_Manual_checklist - список команд выполненных вручную
V$IR_Repair - список востановлений
V$IR_Failure_set - результат проверок ошибок
